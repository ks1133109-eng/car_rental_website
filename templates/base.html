<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DriveX | Premium Rentals</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    {% if not hide_nav %}
    <nav class="navbar">
        <div class="logo"><i class="fas fa-car-side"></i> Drive<span>X</span></div>
        <div class="nav-links">
            <a href="{{ url_for('home') }}">Home</a>
            <a href="{{ url_for('fleet') }}">Cars</a>
            <a href="{{ url_for('about') }}">About Us</a>
            
            {% if current_user.is_authenticated %}
                
                {% if current_user.is_admin %}
                    <a href="{{ url_for('admin_dashboard') }}" style="color: #ffc107; font-weight: bold; border: 1px solid #ffc107; padding: 5px 10px; border-radius: 4px;">
                        <i class="fas fa-crown"></i> Admin Panel
                    </a>
                {% endif %}

                <a href="{{ url_for('dashboard') }}">
                    <i class="fas fa-user-circle"></i> {{ current_user.name }}
                </a>
                
                <a href="{{ url_for('logout') }}" class="btn-login" style="background: #dc3545; margin-left: 10px;">Logout</a>
            
            {% else %}
                <a href="{{ url_for('login') }}" class="btn-login">Login</a>
            {% endif %}
            
            <button id="darkModeToggle" style="background:none; border:none; cursor:pointer; font-size:1.2rem; margin-left:15px;">üåô</button>
        </div>
    </nav>
    {% endif %}

    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div style="text-align: center; background: #333; color: #fff; padding: 10px;">
                {{ messages[0] }}
            </div>
        {% endif %}
    {% endwith %}

    <div style="flex: 1;">
        {% block content %}{% endblock %}
    </div>

    <footer>
        <div style="display: flex; justify-content: space-between; flex-wrap: wrap; gap: 30px;">
            <div style="flex: 1; min-width: 250px;">
                <h3>DriveX</h3>
                <p style="color: #aaa; line-height: 1.6;">
                    India's leading premium self-drive and chauffeur service. 
                    Verified cars, transparent pricing, and 24/7 support.
                </p>
            </div>
            <div style="flex: 1; min-width: 200px;">
                <h4>Company</h4>
                <ul style="list-style: none; padding: 0; line-height: 2;">
                    <li><a href="{{ url_for('about') }}" style="color: #aaa; text-decoration: none;">About Us</a></li>
                    <li><a href="{{ url_for('fleet') }}" style="color: #aaa; text-decoration: none;">Our Fleet</a></li>
                    <li><a href="{{ url_for('contact') }}" style="color: #aaa; text-decoration: none;">Contact / Support</a></li>
                </ul>
            </div>
            <div style="flex: 1; min-width: 200px;">
                <h4>Contact</h4>
                <ul style="list-style: none; padding: 0; line-height: 2;">
                    <li style="color: #aaa;"><i class="fas fa-phone" style="margin-right: 10px;"></i> +91 98765 43210</li>
                    <li style="color: #aaa;"><i class="fas fa-envelope" style="margin-right: 10px;"></i> support@drivex.com</li>
                </ul>
            </div>
        </div>
        <div style="border-top: 1px solid #222; margin-top: 30px; padding-top: 20px; text-align: center; color: #555; font-size: 0.9rem;">
            &copy; 2026 DriveX Technologies. All rights reserved.
        </div>
    </footer>

    <div class="chatbot-btn" onclick="toggleChat()">üí¨</div>
    <div class="chatbot-window" id="chatWindow">
        <div class="chat-header">
            Support Chat
            <span style="cursor:pointer" onclick="toggleChat()">&times;</span>
        </div>
        <div class="chat-body">
            <p><strong>Bot:</strong> Hi! How can I help you today?</p>
            <p style="font-size:0.8rem; color:#666;">(This is a demo chat. For real support, email us.)</p>
        </div>
    </div>

    <script>
        // Chatbot Toggle
        function toggleChat() {
            var chat = document.getElementById('chatWindow');
            chat.style.display = chat.style.display === 'flex' ? 'none' : 'flex';
        }

        // Dark Mode Logic
        const toggle = document.getElementById('darkModeToggle');
        const body = document.body;
        
        if(localStorage.getItem('dark-mode') === 'enabled'){
            body.classList.add('dark-mode');
            toggle.innerText = '‚òÄÔ∏è';
        }

        toggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            if(body.classList.contains('dark-mode')){
                localStorage.setItem('dark-mode', 'enabled');
                toggle.innerText = '‚òÄÔ∏è';
            } else {
                localStorage.setItem('dark-mode', 'disabled');
                toggle.innerText = 'üåô';
            }
        });
    </script>

</body>
</html>
