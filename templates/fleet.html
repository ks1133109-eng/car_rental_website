{% extends "base.html" %}
{% block content %}

<div style="padding: 100px 5% 40px; background: #f8f9fa; min-height: 100vh;">

    <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); margin-bottom: 40px;">
        <h1 style="margin-top: 0; font-size: 1.5rem; margin-bottom: 20px;">Find your perfect drive</h1>
        
        <form action="{{ url_for('fleet') }}" method="GET" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; align-items: end;">
            
            <div>
                <label style="font-size: 0.8rem; font-weight: 700; color: #666; display: block; margin-bottom: 5px;">TYPE</label>
                <select name="category" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                    <option value="All">All Types</option>
                    {% for cat in categories %}
                        <option value="{{ cat }}" {% if current_filters.get('category') == cat %}selected{% endif %}>{{ cat }}</option>
                    {% endfor %}
                </select>
            </div>

            <div>
                <label style="font-size: 0.8rem; font-weight: 700; color: #666; display: block; margin-bottom: 5px;">FUEL</label>
                <select name="fuel_type" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                    <option value="All">Any Fuel</option>
                    {% for fuel in fuel_types %}
                        <option value="{{ fuel }}" {% if current_filters.get('fuel_type') == fuel %}selected{% endif %}>{{ fuel }}</option>
                    {% endfor %}
                </select>
            </div>

            <div>
                <label style="font-size: 0.8rem; font-weight: 700; color: #666; display: block; margin-bottom: 5px;">SEATS</label>
                <select name="seats" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                    <option value="All">Any</option>
                    {% for seat in seat_options %}
                        <option value="{{ seat }}" {% if current_filters.get('seats') == seat|string %}selected{% endif %}>{{ seat }} Seater</option>
                    {% endfor %}
                </select>
            </div>

            <div>
                <label style="font-size: 0.8rem; font-weight: 700; color: #666; display: block; margin-bottom: 5px;">PICKUP</label>
                <input type="date" name="start_date" value="{{ current_filters.get('start_date', '') }}" style="width: 100%; padding: 9px; border: 1px solid #ddd; border-radius: 8px;">
            </div>

            <div>
                <label style="font-size: 0.8rem; font-weight: 700; color: #666; display: block; margin-bottom: 5px;">RETURN</label>
                <input type="date" name="end_date" value="{{ current_filters.get('end_date', '') }}" style="width: 100%; padding: 9px; border: 1px solid #ddd; border-radius: 8px;">
            </div>

            <button type="submit" style="background: #007bff; color: white; padding: 10px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; height: 42px;">
                Search Filter
            </button>
            
            <a href="{{ url_for('fleet') }}" style="text-align: center; font-size: 0.9rem; color: #666; text-decoration: none; padding: 10px;">Reset</a>
        </form>
    </div>

    {% if cars %}
        <div class="car-grid" style="padding: 0;">
            {% for car in cars %}
            <div class="car-card">
                <div class="car-header">
                    <img src="{{ car.image_url }}" class="car-img" alt="{{ car.name }}">
                    <div class="rating-badge"><i class="fas fa-star" style="color:orange;"></i> 5.0</div>
                </div>
                <div class="car-body">
                    <h3 class="car-title">{{ car.name }}</h3>
                    <span class="car-subtitle">{{ car.category }}</span>
                    
                    <div class="specs">
                        <div class="spec-chip"><i class="fas fa-cog"></i> {{ car.transmission }}</div>
                        <div class="spec-chip"><i class="fas fa-gas-pump"></i> {{ car.fuel_type }}</div>
                        <div class="spec-chip"><i class="fas fa-user"></i> {{ car.seats }}</div>
                    </div>

                    <div class="car-footer">
                        <div class="price">â‚¹{{ car.price_per_hr }}<span>/hr</span></div>
                        <a href="{{ url_for('book_car_dates', car_id=car.id) }}" class="btn-arrow">
                            <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 80px 20px; color: #999;">
            <div style="background: #eee; width: 80px; height: 80px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                <i class="fas fa-search" style="font-size: 2rem; color: #ccc;"></i>
            </div>
            <h2>No cars available</h2>
            <p>Try adjusting your filters or changing the dates.</p>
            <a href="{{ url_for('fleet') }}" style="color: #007bff; font-weight: bold; text-decoration: none;">Clear all filters</a>
        </div>
    {% endif %}

</div>
{% endblock %}
