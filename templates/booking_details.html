{% extends "base.html" %}
{% block content %}

<form method="POST" action="{{ url_for('process_payment', booking_id=booking.id) }}">

  <div class="payment-panel">
    <h3>Payment Method</h3>

    <div class="payment-methods">
      <label class="pay-option">
        <input type="radio" name="payment_method" value="upi">
        UPI (GPay / PhonePe / Paytm)
      </label>

      <label class="pay-option">
        <input type="radio" name="payment_method" value="card">
        Credit / Debit Card
      </label>

      <label class="pay-option">
        <input type="radio" name="payment_method" value="netbanking">
        Net Banking
      </label>

      <label class="pay-option">
        <input type="radio" name="payment_method" value="cod">
        Pay at Pickup
      </label>
    </div>

    <div class="price-box">
      <div class="price-row">
        <span>Base Fare</span>
        <span>₹{{ base_price }}</span>
      </div>
      <div class="price-row">
        <span>Taxes & Fees</span>
        <span>₹{{ tax }}</span>
      </div>
      <div class="price-row total">
        <strong>Total</strong>
        <strong>₹{{ total }}</strong>
      </div>
    </div>

    <button class="pay-btn" type="submit" disabled id="payNowBtn">
      Pay Now
    </button>

  </div>

</form>

<script>
  const btn = document.getElementById("payNowBtn");
  document.querySelectorAll("input[name='payment_method']").forEach(el => {
    el.addEventListener("change", () => btn.disabled = false);
  });
</script>

{% endblock %}
