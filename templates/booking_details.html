<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
</head>

<body>
  
{% extends "base.html" %}
{% block content %}

<form method="POST" action="{{ url_for('process_payment', booking_id=booking.id) }}">

  <div class="payment-panel">
    <h3>Payment Method</h3>

    <div class="payment-methods">
      <label class="pay-option">
        <input type="radio" name="payment_method" value="upi">
        <span>UPI (GPay / PhonePe / Paytm)</span>
      </label>

      <label class="pay-option">
        <input type="radio" name="payment_method" value="card">
        <span>Credit / Debit Card</span>
      </label>

      <label class="pay-option">
        <input type="radio" name="payment_method" value="netbanking">
        <span>Net Banking</span>
      </label>

      <label class="pay-option">
        <input type="radio" name="payment_method" value="cod">
        <span>Pay at Pickup</span>
      </label>
    </div>

    <div class="price-box">
      <h4>Price Summary</h4>

      <div class="price-row">
        <span>Base Fare</span>
        <span>â‚¹{{ base_price }}</span>
      </div>

      <div class="price-row">
        <span>Driver Charges</span>
        <span id="driverCharge">â‚¹0</span>
      </div>

      <div class="price-row">
        <span>Taxes & Fees</span>
        <span>â‚¹{{ tax }}</span>
      </div>

      <hr>

      <div class="price-row total">
        <span>Total Payable</span>
        <span id="finalAmount">â‚¹{{ total }}</span>
      </div>
    </div>

    <button class="pay-btn" type="submit" id="payNowBtn" disabled>
      Pay Now
    </button>

    <p class="trust-text">
      ğŸ”’ Secure Payment Â· ğŸ“„ Invoice Generated Â· ğŸ” Easy Cancellation
    </p>
  </div>

</form>

<script>
  const payBtn = document.getElementById("payNowBtn");
  const methods = document.querySelectorAll("input[name='payment_method']");

  methods.forEach(m => {
    m.addEventListener("change", () => {
      payBtn.disabled = false;
    });
  });
</script>

{% endblock %}
</body>

</html>
